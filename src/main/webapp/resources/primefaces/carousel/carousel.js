PrimeFaces.widget.Carousel=PrimeFaces.widget.DeferredWidget.extend({init:function(a){this._super(a);this.viewport=this.jq.children(".ui-carousel-viewport");this.itemsContainer=this.viewport.children(".ui-carousel-items");this.items=this.itemsContainer.children("li");this.itemsCount=this.items.length;this.header=this.jq.children(".ui-carousel-header");this.prevNav=this.header.children(".ui-carousel-prev-button");this.nextNav=this.header.children(".ui-carousel-next-button");this.pageLinks=this.header.find("> .ui-carousel-page-links > .ui-carousel-page-link");this.dropdown=this.header.children(".ui-carousel-dropdown");this.mobileDropdown=this.header.children(".ui-carousel-mobiledropdown");this.stateholder=$(this.jqId+"_page");this.cfg.numVisible=this.cfg.numVisible||3;this.cfg.firstVisible=this.cfg.firstVisible||0;this.columns=this.cfg.numVisible;this.first=this.cfg.firstVisible;this.cfg.effectDuration=this.cfg.effectDuration||500;this.cfg.circular=this.cfg.circular||false;this.cfg.breakpoint=this.cfg.breakpoint||640;this.page=parseInt(this.first/this.columns);this.totalPages=Math.ceil(this.itemsCount/this.cfg.numVisible);this.renderDeferred()},_render:function(){this.updateNavigators();this.bindEvents();if(this.cfg.responsive){this.refreshDimensions()}else{this.calculateItemWidths(this.columns);this.jq.width(this.jq.width());this.updateNavigators()}},calculateItemWidths:function(){var b=this.items.eq(0);if(b.length){var a=b.outerWidth(true)-b.width();this.items.width((this.viewport.innerWidth()-a*this.columns)/this.columns)}},refreshDimensions:function(){var a=$(window);if(a.width()<=this.cfg.breakpoint){this.columns=1;this.calculateItemWidths(this.columns);this.totalPages=this.itemsCount;this.mobileDropdown.show();this.pageLinks.hide()}else{this.columns=this.cfg.numVisible;this.calculateItemWidths();this.totalPages=Math.ceil(this.itemsCount/this.cfg.numVisible);this.mobileDropdown.hide();this.pageLinks.show()}this.page=parseInt(this.first/this.columns);this.updateNavigators();this.itemsContainer.css("left",(-1*(this.viewport.innerWidth()*this.page)))},bindEvents:function(){var b=this;this.prevNav.on("click",function(){if(b.page!==0){b.setPage(b.page-1)}else{if(b.cfg.circular){b.setPage(b.totalPages-1)}}});this.nextNav.on("click",function(){var c=(b.page===(b.totalPages-1));if(!c){b.setPage(b.page+1)}else{if(b.cfg.circular){b.setPage(0)}}});this.itemsContainer.swipe({swipe:function(c,d){if(d==="left"){if(b.page===(b.totalPages-1)){if(b.cfg.circular){b.setPage(0)}}else{b.setPage(b.page+1)}}else{if(d==="right"){if(b.page===0){if(b.cfg.circular){b.setPage(b.totalPages-1)}}else{b.setPage(b.page-1)}}}}});if(this.pageLinks.length){this.pageLinks.on("click",function(c){b.setPage($(this).index());c.preventDefault()})}this.header.children("select").on("change",function(){b.setPage(parseInt($(this).val())-1)});if(this.cfg.autoplayInterval){this.cfg.circular=true;this.startAutoplay()}if(this.cfg.responsive){var a="resize."+this.id;$(window).off(a).on(a,function(){b.refreshDimensions()})}},updateNavigators:function(){if(!this.cfg.circular){if(this.page===0){this.prevNav.addClass("ui-state-disabled");this.nextNav.removeClass("ui-state-disabled")}else{if(this.page===(this.totalPages-1)){this.prevNav.removeClass("ui-state-disabled");this.nextNav.addClass("ui-state-disabled")}else{this.prevNav.removeClass("ui-state-disabled");this.nextNav.removeClass("ui-state-disabled")}}}if(this.pageLinks.length){this.pageLinks.filter(".ui-icon-radio-on").removeClass("ui-icon-radio-on");this.pageLinks.eq(this.page).addClass("ui-icon-radio-on")}if(this.dropdown.length){this.dropdown.val(this.page+1)}if(this.mobileDropdown.length){this.mobileDropdown.val(this.page+1)}},setPage:function(b){if(b!==this.page&&!this.itemsContainer.is(":animated")){var a=this;this.itemsContainer.animate({left:-1*(this.viewport.innerWidth()*b),easing:this.cfg.easing},{duration:this.cfg.effectDuration,easing:this.cfg.easing,complete:function(){a.page=b;a.first=a.page*a.columns;a.updateNavigators();a.stateholder.val(a.page)}})}},startAutoplay:function(){var a=this;this.interval=setInterval(function(){if(a.page===(a.totalPages-1)){a.setPage(0)}else{a.setPage(a.page+1)}},this.cfg.autoplayInterval)},stopAutoplay:function(){clearInterval(this.interval)}});