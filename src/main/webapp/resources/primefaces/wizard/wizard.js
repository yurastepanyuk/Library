PrimeFaces.widget.Wizard=PrimeFaces.widget.BaseWidget.extend({init:function(b){this._super(b);this.content=$(this.jqId+"_content");this.backNav=$(this.jqId+"_back");this.nextNav=$(this.jqId+"_next");this.cfg.formId=this.jq.parents("form:first").attr("id");this.currentStep=this.cfg.initialStep;var a=this;if(this.cfg.showStepStatus){this.stepControls=$(this.jqId+" .ui-wizard-step-titles li.ui-wizard-step-title")}if(this.cfg.showNavBar){var c=this.getStepIndex(this.currentStep);PrimeFaces.skinButton(this.backNav);PrimeFaces.skinButton(this.nextNav);this.backNav.click(function(){a.back()});this.nextNav.click(function(){a.next()});if(c==0){this.backNav.hide()}else{if(c==this.cfg.steps.length-1){this.nextNav.hide()}}}},back:function(){if(this.cfg.onback){var c=this.cfg.onback.call(this);if(c===false){return}}var a=this.getStepIndex(this.currentStep)-1;if(a>=0){var b=this.cfg.steps[a];this.loadStep(b,true)}},next:function(){if(this.cfg.onnext){var c=this.cfg.onnext.call(this);if(c===false){return}}var a=this.getStepIndex(this.currentStep)+1;if(a<this.cfg.steps.length){var b=this.cfg.steps[a];this.loadStep(b,false)}},loadStep:function(c,b){var d=this,a={source:this.id,process:this.id,update:this.id,formId:this.cfg.formId,params:[{name:this.id+"_wizardRequest",value:true},{name:this.id+"_stepToGo",value:c}],onsuccess:function(g,e,f){PrimeFaces.ajax.Response.handle(g,e,f,{widget:d,handle:function(h){this.content.html(h)}});return true},oncomplete:function(h,e,f){d.currentStep=f.currentStep;if(!f.validationFailed){var g=d.getStepIndex(d.currentStep);if(d.cfg.showNavBar){if(g===d.cfg.steps.length-1){d.hideNextNav();d.showBackNav()}else{if(g===0){d.hideBackNav();d.showNextNav()}else{d.showBackNav();d.showNextNav()}}}if(d.cfg.showStepStatus){d.stepControls.removeClass("ui-state-highlight");$(d.stepControls.get(g)).addClass("ui-state-highlight")}}}};if(b){a.params.push({name:this.id+"_backRequest",value:true})}PrimeFaces.ajax.Request.handle(a)},getStepIndex:function(b){for(var a=0;a<this.cfg.steps.length;a++){if(this.cfg.steps[a]==b){return a}}return -1},showNextNav:function(){this.nextNav.fadeIn()},hideNextNav:function(){this.nextNav.fadeOut()},showBackNav:function(){this.backNav.fadeIn()},hideBackNav:function(){this.backNav.fadeOut()}});